### 오늘 한 프로젝트

- twitter bot 개인 프로젝트



### 오늘의 워크 플로우

- 그 동안에 있었던 일...

  - **https를 적용하려고 한 일 1**: pedestal/jetty 자체의 ssl 설정을 이용한다

    ```clojure
    (def service-map
      {::http/routes routes
       ::http/type   :jetty
       ::http/host "0.0.0.0"
       ::http/port   8890
       ::http/container-options 
       {:ssl? true
        :ssl-port 443
        :keystore "location of keystore" ;실제 인증서 경로
        :key-password "thepassword"}})
    ```

    [여기](https://heykieran.github.io/post/pedestal-jetty-https/)를 참고해서 이렇게 서비스 맵을 수정했으나 작동하지 않았다...! nginx 옵션으로 생성한 certbot 인증서를 사용해서 그런가 하고 openssl로 새 인증서를 발급받아 시도해보았지만 안됨. 뭔가 부족한 설정이 있는 것 같아 jetty https 설정 방법도 찾아봤는데 이해가 부족해서인지 정확하게 뭐가 부족한 건지 집어낼 수 없었다. 지금 http 통신과 포트, SSL에 대한 이해가 부족한 것 같음.

  - 그러다가 일반적으로 SSL 적용은 WAS(웹 어플리케이션 서버) 자체에 적용하기 보다 nginx를 이용한다는 스택오버플로우의 글을 봤는데 nginx에 대해 또 새로 들이파기가 부담스러웠던지라 일단 다른 방법은 없는지 더 찾아보게 된다...

  - **https를 적용하려고 한 일 2**: AWS의 인증서 서비스(ACM)을 사용한다

    결과적으로 안됐음. DNS가 뭔지 DNS를 변경하는 것이 어떤 영향을 주는지 모르니 다른 사람들의 포스팅을 기계적으로 따라하기만 했고 당연히 잘 작동하지 않았다.  거기다 AWS 자체의 체계가 너무 복잡하고 모르는 고유명사가 태반이니 이것이 시방 무슨 작용을 하는지 이해하지 못하고 대강 설정하는 것이 먹힐리가 없다.

  - 그래서 결국은 nginx를 리버스 프록시로 사용하며 SSL도 설정하는 방안이 제일 낫겠다는 결론에 다다라...일단 많이 사용하는 방식이므로 알아두는 것도 도움이 되고 관련 자료도 찾기 쉬울테니까.

  - nginx 리버스 프록시 설정과 SSL 설정에 대한 공식 가이드와 유튭 튜토리얼 등을 보며 어떻게 config해야하는지 알아보고 있는 중.

    

### 오늘 프로젝트에서 배운 것

- 어떤 과제를 달성하기 위해 사람들이 가장 많이 사용하는, 널리 알려진 방안이 뭔지 파악하는 게 중요하다. 많이들 쓰는 방법은 다 이유가 있는 법이고 관련 정보도 많다. 남들이 잘 쓰지 않는 프레임워크를 선택해서 인터넷에 예시도 없고, 오로지 빈약한 공식 도큐먼테이션만 있다면 문제발생 시 해결이 어렵다.(지금 나 정도 수준의 경우에는.) 일단은 가급적 많이 쓰는, 많이 설명된 방안을 파악하고 사용하도록 하자. 

- http 통신이 작동하는 방법, SSL의 원리와 적용 등등 모르는 주제가 너무 많다...! 인터넷에 있는 DevOps 로드맵을 보고 뭘 공부해야하는지 확인해봐야 할 것 같다. 

  

### 프로젝트와 관련 없지만 알게 된 것

- vim에서 여러줄에 indent를 넣는 방법: 정리 요

  

### 내일 할 것

- nginx 설정 방법 더 공부하고 리버스 프록시, SSL 적용 단계적으로 해보기  
- 내가 잘 모르는 영역을 DevOps 로드맵에서 특정하기

