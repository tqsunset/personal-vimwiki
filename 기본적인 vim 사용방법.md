# 기본적인 vim 사용방법

vimtutor에 나온 내용들을 아래와 같이 정리했다.
튜터에 따르면 외우려고 하지말고 사용하면서 익히라고 하니 이 페이지는 사실 빔 사용 연습을 위한 것이나 다름 없다.



## 파일 저장, 열기, 종료
|               |                                                      |   |   |   |
|---------------|------------------------------------------------------|---|---|---|
| :e            | Edit, 파일을 연다                                    |   |   |   |
| :w            | Write 파일을 저장한다                                |   |   |   |
| :q            | Quit 현재 윈도우를 끈다                              |   |   |   |
| :x            | Exit 파일에 변경사항이 있으면 저장하고 윈도우를 끈다 |   |   |   |
| :![bash 명령] | bash 상에서 입력된 명령을 실행한다                   |   |   |   |

`:!ls`와 같이 bash의 기능을 사용할 수 있다.



## 지워보자
입력모드에서 지우기는 그냥 백스페이스를 사용하면 된다. 하지만 명령모드에서는 `x`를 사용한다.
`x`는 현재 커서가 위치한 문자를 삭제하고 커서를 한칸 앞으로 보낸다. 일반적으로 커서는 문자와 문자 사이에 위치하지만 빔에서 커서는 하나의 문자를 차지하고 있다. 이런 기본적인 차이 때문에 빔을 사용하는 것이 대부분의 사람들에게 어렵게 느껴지는 것 같다. 

예) abcd 에서 커서가 c에 있을 때 지우기를 하면 c가 지워지고 커서는 그 앞의 b로 이동한다.

## 뭉태기로 지워보자
x는 한글자씩 지우기가 가능하지만 단어 단위로, 또는 문장 단위로 더 빨리 지우고 싶을 수도 있다. 그럴 때 사용하는 건 `d`다. 
다른 텍스트에디터에서 CTRL-Backspace를 사용하는 것처럼 CTRL-x를 하면 되지 않으냔 의문이 든다만 빔의 단축키 매핑은 대체로 CTRL과 같은 키 사용을 자제하는 것 같다. 아마 CTRL을 누르기 위해 손이 부자연스럽게 움직여야하므로 이로 인한 피로를 줄이려고 한 듯하다. 아무튼 뭉태기로 지우려면 `d`다.

### 그럼 지울 범위는 어떻게 정하는가? 
여기서 범위를 지정해주는 키들이 `w`,`e`,`$`,`0` 등이다. 

- `w`는 커서에서 (공백을 포함한) 그 단어의 끝까지 
- `e`는 커서에서 (공백을 포함하지 않은) 그 단어의 끝까지 
- `b`는 커서에서 (공백을 포함한) 그 단어의 머리까지  
- `$`는 커서에서 그 줄의 끝까지 
- `0`는 커서에서 그 줄의 머리까지

...지워준다.

예) Somebody typed the end of this line twice.
커서가 end의 e에 있을 때
1) `w`를 입력하면 'end '가 삭제
2) `e`를 입력하면 'end'가 삭제(end 뒤의 공백은 남는다)
3) `b`를 입력하면 'the '가 삭제
4) `$`를 입력하면 'end of this line twice.'가 삭제
5) `0`을 입력하면 'Somebody typed the '가 삭제된다.

## 왜 web$0는 지울 범위를 설정해줄 수 있는가?
위의 키들은 실제로 커서 이동 단축키이다. `w`는 커서를 다음 단어의 머리로 이동하고, `e`는 커서를 다음 단어의 끝으로 이동시킨다. ('다음 단어'의 끝이 아니라 다음 '단어의 끝'이다) `d`를 누르고 커서를 이동시키면 그만큼 삭제가 되는 것이다.

커서를 이동시킬 횟수도 정할 수 있다. `d2w`는 w를 두번 누른 만큼 삭제하라는 것이다. 따라서 커서의 위치에서 다음 두 단어가 지워지게 된다.

이와 같이 *명령 + 횟수 + 대상* 구조, 또는 *횟수 + 명령 + 대상* 구조로 단축키 활용이 가능하다.
	
참고로 한 줄을 모두 삭제하는 건 `dd`이다. (두줄 삭제는 `2dd`이다)


## undo와 redo를 해보자
명령모드에서 undo는 `u`이다. 그리고 redo는 `CTRL-r`이다. 

작성하고 있는 텍스트가 다음과 같다고 하자. 
```
one two three
# 1) 커서가 one의 o에 있을 때 dw 

two three
# 2) dw

three
# 3) dw


# 이렇게 아무것도 없는 상태가 되었다.
# 1`) 여기서 u를 입력

three
# 2`) u

two three 
# 3`) u

one two three
# 원문이 되었다.
# 여기서 1'') CTRL-r 하면 3`이 취소가 된다

two three
# 2'') CTRL-r로 2`를 취소

three 
# 3'') CTRL-r로 1`를 취소


# 아무것도 없는 상태가 되었다. 
# 여기서 다시 CTRL-r 시 Already at newest change라는 메세지가 뜨며 아무 변화도 일어나지 않는다.
```
CTRL-r는 u를 취소시켜준다. 당연한 얘기인데 빔에서는 어쩐지 혼란스러워서 이렇게 한번 정리해봤다.

## 복사와 붙여넣기
`x`나 `d`를 이용하여 문자를 지우면, 지워진 부분은 레지스터로 보내진다. 문자를 복사를 해도 이 부분은 똑같이 레지스터로 보내진다. 빔에서는 붙여넣기를 하면 이 레지스터에 마지막으로 들어간 문자열이 삽입된다. 

*마지막으로 지운 문자 or 복사한 문자 --저장--> [레지스터] --읽기--> 붙여넣은 문자*

따라서 붙여넣기를 할 때에, 마지막으로 복사한 문자 뿐만 아니라 그 이후에 삭제를 했다면 그 문자열이 붙여넣기된다는 것을 유념해야한다.

마지막으로, 빔에서는 복사를 yank라고 부른다. 그래서 복사yank 단축키는 `y`이다. 붙여넣기는 paste로 `p`가 단축키이다.
`y`는 삭제 키와 똑같이 커서 이동키를 사용해서 복사할 범위를 지정할 수 있다. 예를 들어 `yiw`는 현재 커서가 위치한 단어를 복사한다. 참고로 줄 전체 복사는 `yy`이다.

`p`와 `P`는 조금 다르게 작동한다. `p`는 커서의 아랫줄에, `P`는 커서의 윗줄에 붙여넣는다.
